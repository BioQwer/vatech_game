"use strict";!function(){function o(o,e){var t=o-.5+Math.random()*(e-o+1);return t=Math.round(t)}function e(o,e){return Math.random()-.5}var t,n,l=["picture1.jpg","picture2.jpg","picture3.jpg","picture4.jpg","win.jpg","win2.jpg"],r=["img-1","img-2","img-3","img-4","img-5","img-6"],i=1,a={WELCOME_MESSAGE:"Приглашаем Вас принять участие в игре от VATECH",GAME_MESSAGE:"Выберите снимок с наилучшим качеством изображения",WIN_MESSAGE:"Это снимок сделан при помощи EzSensor от VATECH!",ACTION_MESSAGE:"Пожалуйста, заполните форму и получите подарок",FAIL_MESSAGE:"Попробуйте еще раз…",CHANGE_LANGUAGE_BUTTON:"English",CLICK_FOR_AGAIN:" Нажми, чтобы попробовать еще раз",GO_TO_GAME_BUTTON:"Начать игру"},c={WELCOME_MESSAGE:"Welcome To Vatech Game Zone",GAME_MESSAGE:"Select The Best Intra-Oral Image Out Of These Six",WIN_MESSAGE:"That's The VATECH EzSensor Image!",ACTION_MESSAGE:"Please Fill The Form And Collect Your Gift",FAIL_MESSAGE:"You have 1 more chance…",CHANGE_LANGUAGE_BUTTON:"Русский язык",CLICK_FOR_AGAIN:"Click to try again",GO_TO_GAME_BUTTON:"Start play"},u=angular.module("app",["ngRoute","ng","ngAnimate","ngAudio","pascalprecht.translate"]);u.run(["$rootScope","$location","$templateCache",function(o,e,t){e.path("/"),o.appInitialized=!0}]),u.config(["$routeProvider","$translateProvider",function(o,e){e.translations("ru",a),e.translations("en",c),e.preferredLanguage("ru"),o.when("/game",{templateUrl:"templates/game.html",controller:"GameController"}).when("/win",{templateUrl:"templates/win.html",controller:"WinController"}).when("/",{templateUrl:"templates/welcome.html",controller:"WelcomeController"}).when("/fail",{templateUrl:"templates/fail.html",controller:"FailController"}).otherwise({redirectTo:"/"})}]),u.controller("FailController",["$scope","$window","ngAudio",function(o,e,t){o.redirect=function(){e.location.href="#/game"},console.log(o),n=t.play("audio/fail.mp3"),n.volume=i,o.$on("$destroy",function(){n.stop()})}]),u.controller("WinController",["$scope","ngAudio","$window",function(o,e,l){$("#winImage").attr("src",t),console.log(o),o.redirect=function(){l.location.href="#/game"},n=e.play("audio/win.mp3"),n.volume=i,o.$on("$destroy",function(){n.stop()})}]),u.controller("WelcomeController",["$scope","ngAudio",function(o,e){o.sound=e.play("audio/welcome.mp3"),o.sound.volume=i,n=o.sound,o.$on("$destroy",function(){n.stop()})}]),u.controller("GeneralController",["$translate",function(o){this.checkState=function(){i>0?this.changeTo="glyphicon-volume-off":this.changeTo="glyphicon-volume-up"},this.checkState(),this.changeMute=function(){i>0?(i=0,n.volume=i):(i=1,n.volume=i),this.checkState()};var e=!0;this.changeLanguage=function(){e?(o.use("en"),e=!1):(o.use("ru"),e=!0)}}]),u.controller("GameController",["$scope","$window","ngAudio",function(a,c,u){n=u.play("audio/waiting.mp3"),n.volume=i;var s=$("#timerkeeper").width(),m=$("#countdown").countdown360({radius:s/2.5,seconds:10,label:["sec","secs"],strokeStyle:"#26d7ae",fontColor:"white",fillStyle:"black",fontWeight:100,onComplete:function(){c.location.href="#/fail",console.log("timer done"),setTimeout(function(){m.addSeconds(1e8)},500)}});l.sort(e);var g=o(1,3);r.forEach(function(o,e){var n="images/"+g+"/"+l[e],r=$("#"+o);r.attr("src",n),n.match(".*win.*")?(console.log("win  = "+n),r.click(function(){t=n,c.location.href="#/win",setTimeout(function(){m.addSeconds(1e8)},500)})):r.click(function(){c.location.href="#/fail",setTimeout(function(){m.addSeconds(1e8)},500)}),console.log(o),console.log(n)}),m.start(),console.log("timer start"),a.$on("$destroy",function(){n.stop()})}])}();